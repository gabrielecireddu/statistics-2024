<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive LaTeX</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 10px;
            margin: 0;
        }
        h1, h2 {
            font-size: 24px;
        }
        p {
            font-size: 16px;
        }
        .math-container {
            max-width: 100%;
            overflow-x: auto;
        }
        /* Ridimensionamento responsive per formule */
        @media (max-width: 1200px) {
            p {
            font-size: 12px;
        }
        }
        @media (max-width: 880px) {
            p {
            font-size: 10px;
        }
        }
        @media (max-width: 740px) {
            p {
            font-size: 8px;
        }
        }
        @media (max-width: 600px) {
            p {
            font-size: 6px;
        }
        }
        @media (max-width: 500px) {
            p {
            font-size: 5px;
        }
        }
        @media (max-width: 450px) {
            p {
            font-size: 4px;
        }
        }
        @media (max-width: 380px) {
            p {
            font-size: 3px;
        }
        }
        @media (max-width: 290px) {
            p {
            font-size: 2px;
        }
        }
        @media (max-width: 240px) {
            p {
            font-size: 1px;
        }
        }
    </style>
</head>
<body>
    <div class="math-container">
        <p>Starting from the definition of deviance, we have:

            $$ \text{Dev}_n = \sum_{i=1}^{n} (x_i - \bar{x}_n)^2 = \sum_{i=1}^{n-1} (x_i - \bar{x}_n)^2 + (x_n - \bar{x}_n)^2 = \sum_{i=1}^{n-1} (x_i - \bar{x}_{n-1})^2 + (x_{n-1} - \bar{x}_n)^2 + (x_n - \bar{x}_n)^2 $$
            
            As we can see: 
            
            $$ \text{Dev}_n = \text{Dev}_{n-1} + (n-1)(x_{n-1} - \bar{x}_n)^2 + (x_n - \bar{x}_n)^2 $$
        
            The mean is egual to:

            $$ \bar{x}_n = \frac{(n-1)\bar{x}_{n-1} + x_n}{n} $$

            So:
        
            $$ \text{Dev}_n = \text{Dev}_{n-1} + (n-1)\left( \bar{x}_{n-1} - \frac{(n-1)\bar{x}_{n-1} + x_n}{n} \right)^2 + \left( x_n - \frac{(n-1)\bar{x}_{n-1} + x_n}{n} \right)^2 $$
        
            Simplifying the first term in brackets:

            $$ \left( \bar{x}_{n-1} - \bar{x}_n \right) = \bar{x}_{n-1} - \frac{(n-1)\bar{x}_{n-1} + x_n}{n} = \frac{n\bar{x}_{n-1} - (n-1)\bar{x}_{n-1} - x_n}{n} = \frac{\bar{x}_{n-1} - x_n}{n} $$
        
            $$ \Rightarrow \left( \bar{x}_{n-1} - \bar{x}_n \right)^2 = \frac{(\bar{x}_{n-1} - x_n)^2}{n^2} $$
        
            Simplifying the second term:

            $$ \left( x_n - \bar{x}_n \right) = x_n - \frac{(n-1)\bar{x}_{n-1} + x_n}{n} = \frac{nx_n - (n-1)\bar{x}_{n-1} - x_n}{n} = \frac{(n-1)(x_n - \bar{x}_{n-1})}{n} $$
            
            $$ \Rightarrow \left( x_n - \bar{x}_n \right)^2 = \frac{(n-1)^2(x_n - \bar{x}_{n-1})^2}{n^2} $$
        
            So now we have:

            $$ \text{Dev}_n = \text{Dev}_{n-1} + \frac{(n-1)(x_{n} - \bar{x}_{n-1})^2}{n^2} + \frac{(n-1)^2(x_n - \bar{x}_{n-1})^2}{n^2} $$
        
            Let's add the terms with the same denominator:

            $$ \text{Dev}_n = \text{Dev}_{n-1} + \frac{(n-1)(x_{n} - \bar{x}_{n-1})^2+(n-1)^2(x_n - \bar{x}_{n-1})^2}{n^2}  $$
        
            Simplifying:

            $$ \text{Dev}_n = \text{Dev}_{n-1} + \frac{(x_{n} - \bar{x}_{n-1})^2(n-1)(1+(n-1))}{n^2} \Rightarrow \text{Dev}_n = \text{Dev}_{n-1} + \frac{(x_{n} - \bar{x}_{n-1})^2(n-1)n}{n^2} \Rightarrow \text{Dev}_n = \text{Dev}_{n-1} + \frac{(n-1)}{n} (x_{n} - \bar{x}_{n-1})^2  $$
            
            At this point given that:

            $$ x_n - \bar{x}_{n-1} = \frac{(n-1)(x_n - \bar{x}_{n-1})}{n} \Rightarrow \frac{(n-1)}{n}(x_n - \bar{x}_{n-1})^2 = (x_n - \bar{x}_{n-1})(x_n - \bar{x}_n) $$
        
            So here is the simplified formula:

            $$ \text{Dev}_n = \text{Dev}_{n-1} + (x_n - \bar{x}_n)(x_n - \bar{x}_{n-1}) $$
        </p>
    </div>
</body>
</html>
